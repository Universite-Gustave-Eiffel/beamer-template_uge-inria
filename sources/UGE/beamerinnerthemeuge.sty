%% ---------------------------------------------------------------------------
%% Copyright 2019 Thibaud TOULLIER, Romain NOÃ‹L
%%
%% Based on the UGE theme presentation ppt and graphical charter
%% ---------------------------------------------------------------------------

%\mode<presentation>

%%%
%%%	Title and part pages.
%==============================================================================

%% Title %%%
%%%%%%%%%%%%


% The command to insert the institute logo on title page
\newcommand{\UGEtitlelogo}{%
	\ifbool{reversedColor}{% Dark true 
		\ifscreenratio{% 169
			\includegraphics[height=0.08\paperheight]{\PathSOuge/logos/UGE-logo.pdf}%%
		}{% 43
			\includegraphics[height=0.065\paperheight]{\PathSOuge/logos/UGE-logo.pdf}%%
		}%
	}{% Light
		\ifscreenratio{% 169
			\includegraphics[height=0.08\paperheight]{\PathSOuge/logos/UGE-logo_white.pdf}%%
		}{% 43
			\includegraphics[height=0.065\paperheight]{\PathSOuge/logos/UGE-logo_white.pdf}%%
		}%
	}%
}

% The command to insert the background title page
\newcommand{\UGEtitlepage}{%
	\ifbool{reversedColor}{% Dark true 
		\ifscreenratio{% 169
			\includegraphics[width=\paperwidth, height=\paperheight]{\PathSOuge/logos/pattern-titlepage-reverse.pdf}%%
		}{% 43
			\includegraphics[width=\paperwidth, height=\paperheight]{\PathSOuge/logos/pattern-titlepage-reverse-43.pdf}%%
		}%	
	}{% Light
		\ifscreenratio{% 169
			\includegraphics[width=\paperwidth, height=\paperheight]{\PathSOuge/logos/pattern-titlepage.pdf}%%
		}{% 43
			\includegraphics[width=\paperwidth, height=\paperheight]{\PathSOuge/logos/pattern-titlepage43.pdf}%%
		}%
	}%
}

% The title page template
\defbeamertemplate*{title page}{UGE}{
	\setbeamercolor{progress bar}{fg=normal text.bg}
	\ifscreenratio{% 169
		\begin{picture}(0,0)
			% The background picture
			\put(-28,-128){\UGEtitlepage}
			
			% The text: title, author, institute, etc.
			\put(-30,-125){\noindent%
				\ifbool{reversedColor}{% Dark true 
					\fcolorbox{pale}{pale}%{
				}{% Light
					\fcolorbox{dark}{dark}%{
				}% end if
				{% begin third argument fcolorobx
					%\fcolorbox{normal text.fg}{normal text.fg}{%
					\begin{minipage}[b][\paperheight]{0.9\textwidth}
						\ifbool{reversedColor}{ % Dark true 
							\setbeamercolor{normal text}{fg=dark, }%
						}{% Light
							\setbeamercolor{normal text}{fg=pale, }%
						}%
						\centering
						\vfill%
						\ifx\inserttitle\@empty\else\quad\usebeamertemplate*{title}\fi
						\ifx\insertsubtitle\@empty\else\quad\usebeamertemplate*{subtitle}\fi
						\hbox{\hspace{2pt}\usebeamertemplate*{title separator}\hspace{1pt}}
						\ifx\beamer@shortauthor\@empty\else\usebeamertemplate*{author}\fi
						\ifx\insertdate\@empty\else\usebeamertemplate*{date}\fi
						\ifx\insertinstitute\@empty\else{\parbox{0.9\textwidth}{\raggedright\usebeamertemplate*{institute}} }\fi
						\vfill
						\vbox{}
					\end{minipage}%
				}%
			}
			
			% the institute logo on title page
			\put(234,-120){%
				\UGEtitlelogo
			}
			
			% the extra logos on title page (\inserttitlegraphic)
			\put(-27,-123){%
				\noindent\vbox{%
					\begin{minipage}[b][0.96\paperheight]{0.899\textwidth}%
					\ifx\inserttitlegraphic\@empty\else\usebeamertemplate*{title graphic}\fi%
					\end{minipage}%
				}%
			}
		\end{picture}
	}{% if ratio 43
		\begin{picture}(0,0)
			% The background picture
			\put(-29.25,-136){\UGEtitlepage}
			
			% The text: title, author, institute, etc.
			\put(-28.75,-136){\noindent%
				\ifbool{reversedColor}{% Dark true 
					\fcolorbox{pale}{pale}%{
				}{% Light
					\fcolorbox{dark}{dark}%{
				}% end if
				{% begin third argument fcolorobx
					%\fcolorbox{normal text.fg}{normal text.fg}{%
					\begin{minipage}[b][\paperheight]{0.9\textwidth}
						\ifbool{reversedColor}{ % Dark true 
							\setbeamercolor{normal text}{fg=dark, }%
						}{% Light
							\setbeamercolor{normal text}{fg=pale, }%
						}%
						\centering
						\vfill%
						\ifx\inserttitle\@empty\else\quad\usebeamertemplate*{title}\fi
						\ifx\insertsubtitle\@empty\else\quad\usebeamertemplate*{subtitle}\fi
						\hbox{\hspace{2pt}\usebeamertemplate*{title separator}\hspace{1pt}}
						\ifx\beamer@shortauthor\@empty\else\usebeamertemplate*{author}\fi
						\ifx\insertdate\@empty\else\usebeamertemplate*{date}\fi
						\ifx\insertinstitute\@empty\else{\parbox{0.9\textwidth}{\raggedright\usebeamertemplate*{institute}} }\fi
						\vfill
						\vbox{}
					\end{minipage}%
				}%
			}
			
			% the institute logo on title page
			\put(164,-130){%
				\UGEtitlelogo
			}
			
			% the extra logos on title page (\inserttitlegraphic)
			\put(-25,-130){%
				\noindent\vbox{%
					\begin{minipage}[b][0.96\paperheight]{0.899\textwidth}%
					\ifx\inserttitlegraphic\@empty\else\usebeamertemplate*{title graphic}\fi%
					\end{minipage}%
				}%
			}
		\end{picture}
	}% end ifscrenratio
}

\pgfdeclareimage[height=\paperheight]{UGEtocOfficial}{\PathSOuge/logos/page2_4K.jpg}%
\defbeamertemplate{background canvas}{toc uge official}{%
	\tikz[overlay,remember picture]{
		\node (box) at ([shift={(0,0)}]current page.center) {\pgfuseimage{UGEtocOfficial}};%
	}%
}

\defbeamertemplate{toc page}{uge}[1][]
{%
	\addtolength{\leftskip}{12em} %
	\setbeamertemplate{background canvas}[toc uge official]%
	% \setbeamertemplate{frametitle}[toc inria]%
	\setbeamercolor{section in toc}{fg=pale}%
	\setbeamercolor{subsection in toc}{fg=pale}%
	\setbeamercolor{subsubsection in toc}{fg=pale}%
}


%% Section %%%
%%%%%%%%%%%%%%


\ifbool{reversedColor}{% Dark true
	\ifscreenratio{% 169
		\pgfdeclareimage[height=\paperheight]{UGEStandInBG}{\PathSOuge/logos/pattern-standout.pdf}%
		\pgfdeclareimage[height=\paperheight]{UGEStandOutBG}{\PathSOuge/logos/pattern-section.pdf}%
	}{% 43
		\pgfdeclareimage[height=\paperheight]{UGEStandInBG}{\PathSOuge/logos/pattern-standout43.pdf}%
		\pgfdeclareimage[height=\paperheight]{UGEStandOutBG}{\PathSOuge/logos/pattern-section43.pdf}%
	}%
}{% Light
	\ifscreenratio{% 169
		\pgfdeclareimage[height=\paperheight]{UGEStandInBG}{\PathSOuge/logos/pattern-section.pdf}%
		\pgfdeclareimage[height=\paperheight]{UGEStandOutBG}{\PathSOuge/logos/pattern-standout.pdf}%
	}{% 43
		\pgfdeclareimage[height=\paperheight]{UGEStandInBG}{\PathSOuge/logos/pattern-section43.pdf}%
		\pgfdeclareimage[height=\paperheight]{UGEStandOutBG}{\\PathSOuge/logos/pattern-standout43.pdf}%
	}%
}%

\defbeamertemplate{background canvas}{section uge}{
	\pgfuseimage{UGEStandInBG}
}

\defbeamertemplate*{section frame}{uge}[1][]%
{%
	% \usebeamertemplate*{section page}% already included
	\setbeamertemplate{background canvas}[section uge]%
	% \setbeamertemplate{sidebar canvas right}[gotham filigrane]%
	\setbeamertemplate{sidebar canvas right}[empty]%
	\setbeamertemplate{footline}[empty]%
	\setbeamertemplate{logo}[empty]%
}%


\defbeamertemplate*{subsection frame}{uge}[1][]%
{%
	% \usebeamertemplate*{subsection page}% already included
	\setbeamertemplate{section frame}[section uge]%
	\usebeamertemplate{section frame}%
}%

\defbeamertemplate*{subsubsection frame}{uge}[1][]%
{%
	% \usebeamertemplate*{subsubsection page}% already included
	\setbeamertemplate{section frame}[section uge]%
	\usebeamertemplate{section frame}%
}%



%% Standout %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%

\defbeamertemplate*{background canvas}{standin uge}[1][]{%
	\pgfuseimage{UGEStandInBG}
}%

\defbeamertemplate*{standin}{uge}[1][]{%
	\setbeamertemplate{background canvas}[standin uge]
	% \usebeamertemplate{background canvas}%[standin gotham]
	\usebeamerfont{standin}
}%

\defbeamertemplate*{background canvas}{standout uge}[1][]{%
	\pgfuseimage{UGEStandOutBG}
}%

\defbeamertemplate*{standout}{uge}[1][]{%
	\setbeamertemplate{background canvas}[standout uge]
	% \usebeamertemplate{background canvas}%[standout gotham]
	\setbeamertemplate{sidebar canvas right}[empty]
	\usebeamerfont{standout}
	\ifbeamercolorempty[bg]{palette primary}{%true : empty background (light)
		\setbeamercolor{background canvas}{
			use=palette primary,
			bg=palette primary.fg %-palette primary.fg
		}
	}{%false : background not empty (dark)
		\setbeamercolor{background canvas}{
			use=palette primary,
			bg=palette primary.bg
		}
	}
	\setbeamercolor{local structure}{
		fg=palette primary.bg
	}
	\usebeamercolor[fg]{palette primary}
}%

\pgfdeclareimage[height=\paperheight]{UGEoutOfficial}{\PathSOuge/logos/page4_4K.jpg}%
\defbeamertemplate{background canvas}{standout uge official}[1][]{%
	\pgfuseimage{UGEoutOfficial}
}%

\defbeamertemplate{standout}{uge official}[1][]{%
	\setbeamertemplate{background canvas}[standout uge official]
	% \usebeamertemplate{background canvas}%[standout gotham]
	\setbeamertemplate{sidebar canvas right}[empty]
	\usebeamerfont{standout}
	\ifbeamercolorempty[bg]{palette primary}{%true : empty background (light)
		\setbeamercolor{background canvas}{
			use=palette primary,
			bg=palette primary.fg %-palette primary.fg
		}
	}{%false : background not empty (dark)
		\setbeamercolor{background canvas}{
			use=palette primary,
			bg=palette primary.bg
		}
	}
	\setbeamercolor{local structure}{
		fg=palette primary.bg
	}
	\usebeamercolor[fg]{palette primary}
}%

%% Environments styles %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%

%%% Itemize environments.
	\setbeamertemplate{itemize item}{$\bullet$}
	\setbeamertemplate{itemize subitem}[triangle]
	\setbeamertemplate{itemize subsubitem}{-}
	
%%% Enumerate environments.
	% metropolis style
%%% Description environments.
	% metropolis style
%%% Block environments.
	% metropolis style
%%% Theorem and proof environments.
	% metropolis style + corrections from MyPackages
%%% Figures and tables.
	% metropolis style
%%% Footnotes.
	% metropolis style + corrections from MyPackages
%%% Bibliography entries.
	% metropolis style + corrections from MyPackages

%\mode<all>

%%
%% End of file `beamerinnerthemeuge.sty'.
