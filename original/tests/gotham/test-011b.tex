\documentclass{beamer}

\usepackage{regexpatch}

\newcommand{\prehook}{}
\newcommand{\posthook}{}
\defbeamertemplate{background canvas}{normal}[1][]
{%
   \prehook% prehook
	TEST 1
}

\defbeamertemplate{background canvas}{fancy}[1][]
{%
	SUPER STYLE TEST 0
}

\setbeamertemplate{background canvas}[normal]
% \addtobeamertemplate{background canvas}{% pre patch
% }{%post patch
%  IS UGLY
% }


% %xpatchbeamertemplate{<template name>}{<template option>}{<code to patch>}{<new code>}
\ExplSyntaxOn
\cs_new_protected:Npn \__gtm_proxy:nnnn #1 #2 #3 #4
{ 
   % \cs_show:N #3
   {#1}.{#2}.{#3}.{#4}
}
% \cs_generate_variant:Nn \__gtm_proxy:nnxn { nnfn }

\DeclareDocumentCommand{\xpatchbeamertemplate}{ m m m m }
{
% \newrobustcmd{\xpatchbeamertemplate}[4]{%
   % \makeatletter
   % \expandafter\xpatchcmd\csname beamer@@tmpop@#1@#2\endcsname{% code to patch
   \exp_args:Nc \xpatchcmd {beamer@@tmpop@#1@#2} {% code to patch
      #3
   }{% new code (patch to apply)
      #4
   }{% Successful comment
      \PackageWarning{beamerthemegotham}{The Beamer template '#1' with the option '#2' has been correctly patched.}%
   }{% Faillure comment
      \PackageError{beamerthemegotham}{The Beamer template '#1' with the option '#2' patch FAILED with commands '#3' and '#4'.}{}%
   }%
   % \exp_args:Nnnnn 
   % \cs_show:N #3 
   \__gtm_proxy:nnnn {#1} {#2} {#3} {#4}
   % {#1}.{#2}.{#3}.{#4}
   % \__gtm_proxy:NNNN {#1}{#2}{#3}{#4}
   %\makeatother
}
\ExplSyntaxOff




% \xpatchbeamertemplate{background canvas}{normal}{\prehook}{\prehook befor}
% \expandafter\xpatchcmd\csname beamer@@tmpop@background canvas@normal\endcsname{% code to patch
%       \prehook
%    }{% new code (patch to apply)
%       before
%    }{% Successful comment
%       \PackageWarning{beamerthemegotham}{The Beamer template '#1' with the option '#2' has been correctly patched.}%
%    }{% Faillure comment
%       \PackageError{beamerthemegotham}{The Beamer template '#1' with the option '#2' patch FAILED with commands '#3' and '#4'.}{}%
%    }%


%%%% An workaround attempt not working  
% \setbeamertemplate{background canvas}[fancy]
% \addtobeamertemplate{background canvas}{% pre patch
% }{%post patch
%  IS BEAUTIFUL
% }
% \setbeamertemplate{background canvas}[normal]

\begin{document} %
\xpatchbeamertemplate{background canvas}{normal}{1}{1 is ugly}

\begin{frame}{title}
   normal ugly frame %\test{2}{ZZ}
\end{frame}

{
\setbeamertemplate{background canvas}[fancy]
\begin{frame}{title}
   fancy frame
\end{frame}
}

\begin{frame}{title}
   normal frame still ugly
\end{frame}

\setbeamertemplate{background canvas}[normal]
\begin{frame}{title}
   normal frame with the ugly gone
\end{frame}

\end{document}
